"use strict";(self.webpackChunkthincode=self.webpackChunkthincode||[]).push([[767],{767:(I,y,p)=>{p.d(y,{I:()=>K});var t=p(2560),u=p(9857),v=p(8091);class O{constructor(r){Object.assign(this,r)}}var T=p(1059),_=p(4666),C=p(2302),m=p(2508),k=p(6896);const D=["checkBox"];function j(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"a")(2,"i",10),t.NdJ("click",function(){const n=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.iconData(n))}),t.qZA()(),t.BQk()}if(2&o){const e=r.$implicit;t.xp6(2),t.Gre("icon ",e.link,""),t.s9C("matTooltip",e.etiqueta)}}function x(o,r){if(1&o&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Oqu(i.capitalizeFirstLetter(e.headerGrid))}}function w(o,r){if(1&o&&(t.ynx(0),t.YNc(1,x,2,1,"th",11),t.BQk()),2&o){const e=r.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngIf",!i.evaluateTitle(e.headerGrid))}}function A(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",15),t.NdJ("dblclick",function(){t.CHM(e);const s=t.oxw(2).$implicit,n=t.oxw();return t.KtG(n.doubleClick(s))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit,i=t.oxw().$implicit,s=t.oxw();t.xp6(1),t.Oqu(s.getDataByKey(i,e))}}function S(o,r){if(1&o&&(t.ynx(0),t.YNc(1,A,2,1,"td",14),t.BQk()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf","id"!=e&&"isSelected"!=e)}}function F(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"input",12,13),t.NdJ("ngModelChange",function(s){const l=t.CHM(e).$implicit;return t.KtG(l.isSelected=s)})("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.isAllSelected())}),t.qZA()(),t.YNc(4,S,2,1,"ng-container",5),t.qZA()}if(2&o){const e=r.$implicit,i=t.oxw();t.xp6(2),t.s9C("value",e.id),t.Q6J("ngModel",e.isSelected),t.xp6(2),t.Q6J("ngForOf",i.arrKeysObj)}}const M=function(o,r){return{itemsPerPage:o,currentPage:r}},f=new v.Zr;let K=(()=>{class o{constructor(e){this.privilegiosService=e,this.p=1,this.arrayIcons=[],this.getIcons=[],this.masterSelected=!1,this.paginado=10,this.th_rows=[],this.filas=[],this.columnas=[],this.arrKeysObject=[],this.emitData=new t.vpe,this.emitArrayData=new t.vpe,this.emitEventData=new t.vpe,this.copiaFilas=[],this.ArrayKeys=[],this.data=[],this.row_headers=[],this.setCheckBox=new Set,this.arrKeysObj=[]}ngDoCheck(){}set setDataForPerfiles(e){console.log("........................................................");let i={listData:[{header:"IDPEFIL",listaData:["144","300","400"]},{header:"PERFIL",listaData:["Administrador","Coordinador","Ejecutivo de Oficina de Proyectos"]},{header:"ESTATUS",listaData:["1","1","1"]}],config:[{idFieldReference:10,headerGrid:"IDPEFIL",order:1},{idFieldReference:11,headerGrid:"PERFIL",order:2},{idFieldReference:12,headerGrid:"ESTATUS",order:3}]},n=[],l=i.listData.length,a=i.listData[0].listaData.length;for(let h=0;h<l;h++){n[h]=new Array;for(let d=0;d<a;d++)n[h][d]=i.listData[h].listaData[d]}console.table(n);let g=n.length,c=n[0].length,b=[];for(let h=0;h<g;h++){b[h]=new Array;for(let d=0;d<c;d++)b[h][d]=n[d][h]}this.cuadrada=b,console.table(b),console.table(this.cuadrada)}set setDataUsers(e){console.log(e);let i=0,s=[];for(let l=0;l<e.listUsers.length;l++)Object.keys(e.listUsers[l]).length>=i&&(s.length=0,i=Object.keys(e.listUsers[l]).length,s=Object.keys(e.listUsers[l]));console.table(s);let n=[];n.length=0;for(let l=0;l<e.listUsers.length;l++){let a=this.defineObject(s);if("object"==typeof e.listUsers[l]){let g=new O(e.listUsers[l]);for(let c=0;c<s.length;c++)a[s[c]]=g[s[c]]??null;Reflect.set(a,"isSelected",!1),n.push(a)}}this.showData=n,console.table(this.showData),this.arrKeysObj.length=0;for(let l of e.config)switch(this.row_headers.push(l),l.idFieldReference){case 9:this.arrKeysObj.push("id");break;case 1:this.arrKeysObj.push("status");break;case 2:this.arrKeysObj.push("usuario");break;case 3:this.arrKeysObj.push("nombre");break;case 4:this.arrKeysObj.push("apellido");break;case 5:this.arrKeysObj.push("materno");break;case 6:this.arrKeysObj.push("correo");break;case 7:case 8:this.arrKeysObj.push("ultimoAccesoAlsistema")}}getDataByKey(e,i){return e[i]}set setData(e){let i=0,s=[];s.length=0;let n=[];const l=new Set;for(let a=0;a<e.length;a++)Object.keys(e[a]).length>=i&&(n.length=0,i=Object.keys(e[a]).length,n=Object.keys(e[a]));for(let a=0;a<e.length;a++){let g=this.defineObject(n);if("object"==typeof e[a]){for(let c=0;c<n.length;c++)g[n[c]]=e[a][n[c]]??null;Reflect.set(g,"isSelected",!1),s.push(g),l.add(g)}}this.showData=s}get getData(){return this.showData}evaluateTitle(e){return!!e.toLowerCase().includes("iduser")}ngOnChanges(e){this.copiaFilas=[...this.filas],this.generateObjectGeneric()}generateObjectGeneric(){let e=0;for(let i=0;i<this.copiaFilas.length;i++)Object.keys(this.copiaFilas[i]).length>=e&&(this.ArrayKeys.length=0,e=Object.keys(this.copiaFilas[i]).length,this.ArrayKeys=Object.keys(this.copiaFilas[i]));this.ArrayKeys.forEach(i=>{for(let s=0;s<this.copiaFilas.length;s++)"object"==typeof this.copiaFilas[s]&&(this.copiaFilas[s]=Reflect.set(this.copiaFilas[s],"isSelect",!0),1!=Reflect.has(this.copiaFilas[s],i)&&(this.copiaFilas[s]=Reflect.set(this.copiaFilas[s],i,"N/A"),console.log(this.copiaFilas)))})}ngOnInit(){this.privilegiosService.getPrivilegios().subscribe(e=>{this.arrPrivilegios=e}),this.privilegiosService.setPrivilegios(),"users"==this.tableFor||"solicitudes"==this.tableFor&&this.configSolicitudesGrid(),setTimeout(()=>{console.log(this.privilegiosService.getAllPrivilegiosArr());let e=[...this.privilegiosService.getAllPrivilegiosArr()];new u.qh(this.privilegiosService.searchTree(e[1],109)),this.getIcons=new u.qh(this.privilegiosService.searchTree(e[1],102)).children},5e3)}configUsersGrid(){f.tree(this.arrPrivilegios,0),this.arrPrivilegios.filter(s=>0==s.parentprivilegio&&1==s.status&&s.descripcion.includes("Menu principal"));let e=f.tree(this.arrPrivilegios,0),i=this.searchTree(e,"Usuarios");this.setIcons(i.children),setTimeout(()=>{let s=this.privilegiosService.getAllPrivilegiosArr();console.log(s),this.getIcons=new u.qh(this.privilegiosService.searchTree(s[1],102)).children,console.log(this.getIcons)},5e3)}configSolicitudesGrid(){f.tree(this.arrPrivilegios,0),this.arrPrivilegios.filter(s=>0==s.parentprivilegio&&1==s.status&&s.descripcion.includes("Solicitudes"));let e=f.tree(this.arrPrivilegios,0),i=this.searchTree(e,"Solicitudes");this.setIcons(i.children),setTimeout(()=>{let s=this.privilegiosService.getAllPrivilegiosArr();this.getIcons=new u.qh(this.privilegiosService.searchTree(s[1],254)).children},5e3)}setIcons(e){e.forEach(i=>{i.link.includes("fa")&&1==i.status&&this.arrayIcons.push(i.link)})}searchTree(e,i){if(e.descripcion==i)return e;if(null!=e.children){let s,n=null;for(s=0;null==n&&s<e.children.length;s++)n=this.searchTree(e.children[s],i);return n}return null}destructurinData(e){let i=[];for(let s of Object.values(e))i.push(s);return i}keys(e){let i=[];Object.create(e),Object.entries(e);for(let[l,a]of Object.entries(e))i.push(l);return i}getKeys(e){this.arrKeysObject.length=0;for(let i of e){this.th_rows.length==Object.keys(i).length&&(this.arrKeysObject=Object.keys(i));break}}defineObject(e){let i=Object.create(null);return e.forEach(s=>{Object.defineProperty(i,s,{configurable:!0,enumerable:!0,writable:!0,value:null})}),i}capitalizeFirstLetter(e){let i=e.toLowerCase();return i.charAt(0).toUpperCase()+i.slice(1)}doubleClick(e){this.emitData.emit(e)}checkUncheckAll(){for(let e=0;e<this.showData.length;e++)this.showData[e].isSelected=this.masterSelected;this.getCheckedItemList()}isAllSelected(){this.masterSelected=this.showData.every(function(e){return 1==e.isSelected}),this.getCheckedItemList()}getCheckedItemList(){this.checkedList=[];for(let e=0;e<this.showData.length;e++)this.showData[e].isSelected&&this.checkedList.push(this.showData[e]);this.emitArrayData.emit(this.checkedList),this.checkedList=JSON.stringify(this.checkedList)}iconData(e){this.emitEventData.emit(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T._))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-table-component"]],viewQuery:function(e,i){if(1&e&&t.Gf(D,5),2&e){let s;t.iGM(s=t.CRH())&&(i.viewChildren=s)}},inputs:{url:"url",paginado:"paginado",tableFor:"tableFor",th_rows:"th_rows",filas:"filas",columnas:"columnas",setDataForPerfiles:"setDataForPerfiles",setDataUsers:"setDataUsers",setData:"setData"},outputs:{emitData:"emitData",emitArrayData:"emitArrayData",emitEventData:"emitEventData"},features:[t.TTD],decls:24,vars:10,consts:[[1,"table-responsive"],[1,"container"],[1,"row"],[1,"col-md-2"],[1,"col-md-10"],[4,"ngFor","ngForOf"],[1,"table","table-bordered","table-striped","table-sm"],["type","checkbox","name","list_name","id","master_1",3,"ngModel","ngModelChange","change"],[1,"pagination"],["previousLabel","Previo","nextLabel","Siguiente",3,"pageChange"],["id","",2,"margin","4px",3,"matTooltip","click"],[4,"ngIf"],["type","checkbox","name","list_name",3,"ngModel","value","ngModelChange","change"],["checkBox",""],[3,"dblclick",4,"ngIf"],[3,"dblclick"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3)(4,"div",3)(5,"div",3)(6,"div",3)(7,"div",3),t.TgZ(8,"div",3)(9,"div",2),t._UZ(10,"div",3),t.TgZ(11,"div",4),t.YNc(12,j,3,4,"ng-container",5),t.qZA()()()()(),t.TgZ(13,"table",6)(14,"thead")(15,"tr")(16,"th")(17,"input",7),t.NdJ("ngModelChange",function(n){return i.masterSelected=n})("change",function(){return i.checkUncheckAll()}),t.qZA()(),t.YNc(18,w,2,1,"ng-container",5),t.qZA()(),t.TgZ(19,"tbody"),t.YNc(20,F,5,3,"tr",5),t.ALo(21,"paginate"),t.qZA()(),t.TgZ(22,"div",8)(23,"pagination-controls",9),t.NdJ("pageChange",function(n){return i.p=n}),t.qZA()()()),2&e&&(t.xp6(12),t.Q6J("ngForOf",i.getIcons),t.xp6(5),t.Q6J("ngModel",i.masterSelected),t.xp6(1),t.Q6J("ngForOf",i.row_headers),t.xp6(2),t.Q6J("ngForOf",t.xi3(21,4,i.getData,t.WLB(7,M,i.paginado,i.p))))},dependencies:[_.sg,_.O5,C.LS,m.Wl,m.JJ,m.On,k.gM,C._s],styles:["thead[_ngcontent-%COMP%]{background-color:#008ba1}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){text-align:center}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){text-align:center}.icon[_ngcontent-%COMP%]:hover{cursor:pointer;scale:1.2}.icon[_ngcontent-%COMP%]{color:#000}.special[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7){background-color:#c2ddf2}\n/*# sourceMappingURL=table-component.component.css.map*/"]}),o})()}}]);
//# sourceMappingURL=767.js.map